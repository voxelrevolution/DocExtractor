# Evidence: T04.4.2_JD-DEV013_BackendChatAPI

## Summary
Implemented a real backend `POST /api/chat` endpoint and upgraded it to optionally use local Ollama via HTTP while preserving citations from extracted evidence.
Enforced `client_id` scoping for document-scope chat and latest-extraction selection.

## Key Implementation Points
- Backend endpoint: `POST /api/chat` in [src/main.py](Reserved/DocExtractor/src/main.py)
- Ollama integration (no new deps): [src/llm/ollama_http.py](Reserved/DocExtractor/src/llm/ollama_http.py)
- Smoke test script: [scripts/ollama_smoke_test.py](Reserved/DocExtractor/scripts/ollama_smoke_test.py)
- Backend tests updated/added: [tests/test_chat_api.py](Reserved/DocExtractor/tests/test_chat_api.py)

## Validation
- `pytest`: `66 passed`
- Captured output: `evidence/E04/test_runs/2026-01-19_pytest_full.txt`
- Governance audit: `GOVERNANCE AUDIT PASSED`
- Captured output: `evidence/E04/test_runs/2026-01-19_governance_audit.txt`

## Local Ollama Configuration
Example env vars:
- `DOCEXTRACTOR_OLLAMA_ENABLED=1`
- `DOCEXTRACTOR_OLLAMA_HOST=http://localhost:11434`
- `DOCEXTRACTOR_OLLAMA_MODEL=llama3.1:8b`
- `DOCEXTRACTOR_OLLAMA_TIMEOUT_S=20`
