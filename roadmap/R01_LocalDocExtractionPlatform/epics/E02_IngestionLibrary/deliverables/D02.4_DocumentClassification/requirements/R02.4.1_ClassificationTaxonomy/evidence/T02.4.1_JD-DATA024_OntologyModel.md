# Ontology Model: Semantic Relationships & Facets

**Task:** T02.4.1_JD-DATA024_DefineClassificationTaxonomy  
**Evidence Artifact:** Ontology & Semantic Model  
**Created By:** DATA-024 (Ontology and Taxonomy Designer)  
**Date:** 2026-01-14

---

## Executive Summary

Flat semantic model with 5 domain classes and 32 category instances. No hierarchical inference; relationships are explicit. Faceting enabled for D02.5 filtering. Zero ambiguity; each category is atomic and non-overlapping.

---

## Semantic Model (RDF-Style Notation)

```
Class: DocumentClass (abstract)
  Subclasses: FinancialDocument, LegalDocument, HRDocument, 
              OperationsDocument, OtherDocument

Class: FinancialDocument
  Instances: Invoice, Receipt, PurchaseOrder, Quote, Statement, 
             CreditMemo, DebitMemo, ExpenseReport, TaxDocument, 
             PaymentConfirmation

Class: LegalDocument
  Instances: Contract, StatementOfWork, Liability, TermsConditions,
             Compliance, IntellectualProperty, LegalNotice,
             RegulatoryDocument

Class: HRDocument
  Instances: EmploymentContract, Payroll, PerformanceReview,
             Benefits, Training, Termination

Class: OperationsDocument
  Instances: ProjectPlan, MeetingMinutes, OrgChart, Policy,
             VendorDocument

Class: OtherDocument
  Instances: Marketing, Correspondence, Unclassifiable
```

---

## Category Relationships

### Financial Domain Relationships

```
PaymentFlow:
  Purchase Order → Invoice → Payment Confirmation → Receipt
  (Buyer intent) (Seller claim) (Payment sent) (Payment received)

CreditAdjustment:
  Invoice → Credit Memo (reduces amount due)
  Purchase Order → Debit Memo (increases amount due)

AccountingCycle:
  Individual transactions (Invoice, Receipt) → Statement (summary)
  Statement contains: opening balance, transactions, closing balance
```

**Semantic Rule:** Each step in PaymentFlow is distinct; classification is deterministic based on payment status.

### Legal Domain Relationships

```
ContractFamily:
  Quote → Contract → Statement of Work (SOW)
  (Offer) (Binding) (Deliverables)

ComplianceFamily:
  Regulatory Document → Compliance Report → Audit Document
  (Government requirement) (Internal attestation) (Third-party review)

IPProtection:
  Patent/Trademark → License Agreement → IP Assignment
  (Registration) (Permission to use) (Ownership transfer)
```

**Semantic Rule:** Contract is binding; Quote is not. SOW describes deliverables within a Contract.

### HR Domain Relationships

```
EmploymentLifecycle:
  Employment Contract → Payroll (ongoing) → Performance Review → Termination
  (Hiring) (Compensation) (Evaluation) (Separation)

BenefitsManagement:
  Employment Contract (includes benefits) → Benefits Enrollment → Payroll (deduction)
  (Initial offer) (Annual election) (Deduction processed)
```

**Semantic Rule:** Payroll references Employment Contract; may reference Performance Review for bonus info.

### Operations Domain Relationships

```
ProjectManagement:
  Project Plan → Status Report (periodic) → Meeting Minutes (decisions)
  (Definition) (Progress) (Documentation)

GovernanceStructure:
  Policy (rules) → Org Chart (who enforces) → Vendor (external enforcement)
  Org Chart → Contact Directory (implementation)
```

**Semantic Rule:** Policy defines rules; Org Chart shows who enforces; Vendor documents are external compliance.

---

## Faceting for D02.5 (Filtering)

**Primary Facet: Domain**
```
Financial → {Invoice, Receipt, PO, ...}
Legal → {Contract, SOW, ...}
HR → {Employment Contract, Payroll, ...}
Operations → {Project Plan, Policy, ...}
Other → {Marketing, Correspondence, ...}
```

**Secondary Facets (Optional, for future v2.0):**

| Facet | Values | Use Case |
|-------|--------|----------|
| **Business Function** | Finance, Legal, HR, Ops | Who owns? |
| **Compliance Level** | High (contract, audit), Medium (policy, procedure), Low (email, memo) | Risk-based filtering |
| **Payment-Related** | Yes (Invoice, Receipt, PO, Statement), No | Cash flow analysis |
| **Sensitive Data** | Yes (HR, Legal, Tax), No | Encryption/access control |

**Design Decision:** Start with Domain facet; add secondary facets in v2.0 if retrieval becomes bottleneck.

---

## Non-Overlapping Category Boundaries

**Question:** Can a document be both Invoice and Receipt?

**Answer:** NO. Mutually exclusive by design.
- Invoice: Payment NOT yet made (request for payment)
- Receipt: Payment already made (confirmation of payment)

LLM must classify as one or the other based on payment status. If ambiguous (e.g., "Pro Forma Invoice + Receipt"), escalate for human review (confidence < 0.7).

**Question:** Can a document be both Contract and SOW?

**Answer:** SOW is a component of Contract, not a separate classification.
- Contract: Legal agreement with terms, signatures
- SOW: Attached to Contract; describes deliverables

Classify as "Contract" (primary); indicate if SOW is attached (metadata, not category).

**Question:** Can a document be both Policy and Legal Notice?

**Answer:** NO. Distinct categories.
- Policy: Internal governance (Code of Conduct, Expense Policy)
- Legal Notice: Formal notice of legal claim (Cease & Desist, Notice of Termination)

Policy is advisory; Legal Notice is mandatory compliance action.

---

## Confidence Thresholds for Each Category

| Category | Confidence Threshold | Reasoning |
|----------|---------------------|-----------|
| **High Risk (Legal, HR, Tax)** | 0.90+ | Misclassification = compliance risk; require human review if < 0.90 |
| **Medium Risk (Invoice, Receipt, Contract)** | 0.85+ | Misclassification = business impact; escalate if < 0.85 |
| **Low Risk (Email, Marketing, Other)** | 0.70+ | Low impact; accept < 0.70 with audit logging |

**LLM Prompt Guidance:**
- Always output confidence score [0.0-1.0]
- Classifier responsible for escalating low-confidence classifications
- Audit trail captures: category, confidence, reason for low confidence

---

## Error Handling & Edge Cases

### Edge Case 1: Multi-Purpose Document
**Document:** Receipt that also serves as warranty card

**Resolution:** Classify as PRIMARY purpose.
- If primarily payment confirmation → Receipt
- If primarily warranty → Other (if warrant not a standard category)

**LLM Prompt:** "Classify by primary purpose. If ambiguous, escalate (confidence < 0.7)."

### Edge Case 2: Foreign Language Document
**Document:** Invoice in Spanish

**Resolution:** Classify by content structure, not language.
- Spanish invoice is still "Invoice" (FIN-001)
- Confidence may be lower due to language barrier

**LLM Prompt:** "Language varies; classify by structure and content keywords."

### Edge Case 3: Corrupted or Scanned Document
**Document:** Scanned image with faint text

**Resolution:** Classify as "Other" (OTHER-003) if confidence < 0.50
- Log in audit trail with reason: "Corrupted/unreadable"
- Flag for manual review

**LLM Prompt:** "If document is unreadable or confidence < 0.50, classify as 'Other'."

---

## Relationship to Data Model (D02.3)

**Schema Integration:**

```sql
-- How taxonomy maps to schema
SELECT d.filename, dc.category, dc.confidence, dc.model_version
FROM documents d
JOIN document_classifications dc ON d.id = dc.doc_id
WHERE dc.category IN ('FIN-001', 'FIN-002', ..., 'OTHER-003')
  AND dc.confidence >= 0.85
ORDER BY d.import_time DESC;

-- Faceted filtering (D02.5 use case)
SELECT category, COUNT(*) as doc_count
FROM document_classifications
WHERE model_version = 'v1.0'
GROUP BY category
ORDER BY doc_count DESC;
```

**Constraints:**
- `document_classifications.category` VARCHAR(100) stores category name (e.g., "Invoice", "Contract")
- UNIQUE(doc_id, category, model_version): One classification per doc per model per category
- Index on category for faceted filtering < 100ms

---

## Semantic Clarity Examples

### Example 1: Why "Invoice" ≠ "Receipt"
```
Document: "Payment received for services rendered"
LLM Logic:
  IF "received" AND payment_status = PAID → Receipt
  IF "invoice" AND payment_status = DUE → Invoice
  IF ambiguous → confidence < 0.80 → escalate

Deterministic: Classifier must decide based on payment status.
```

### Example 2: Why "Contract" ≠ "SOW"
```
Document: "Service Agreement with Scope of Work"
LLM Logic:
  Primary classification: Contract (legal agreement, signatures)
  Secondary metadata: SOW_attached = true (for retrieval)
  Reasoning: SOW is part of Contract, not standalone category

Retrieval: "Show me all Contracts" includes SOW-attached contracts.
```

### Example 3: Why "Policy" ≠ "Legal Notice"
```
Document: "Expense Reimbursement Policy (Effective 2026-01-01)"
LLM Logic:
  Classification: Policy (internal governance)
  Confidence: 0.95 (clear structure: "Policy", "Effective Date")

Counter-example: "Notice of Termination (Effective 2026-01-15)"
  Classification: Legal Notice (formal notice of consequence)
  Confidence: 0.90 (legal language, specific employee reference)

Deterministic: One is governance; other is legal claim.
```

---

## Future Hierarchy (v2.0 - Not Implemented Yet)

**Potential Hierarchization:**

```
DocumentRoot
├─ FinancialDocument
│  ├─ PaymentRequest (Invoice, PO, Quote)
│  ├─ PaymentConfirmation (Receipt, Statement)
│  ├─ Adjustment (Credit Memo, Debit Memo)
│  └─ Other (Expense Report, Tax, Payment Confirmation)
│
├─ LegalDocument
│  ├─ Binding (Contract, SOW, License)
│  ├─ Governance (T&C, Policy, Compliance)
│  └─ Notice (Legal Notice, Regulatory)
│
... etc
```

**Rationale for Flat (v1.0):**
- LLM classification works better with flat taxonomy (less confusion)
- Schema is simpler (no parent_category foreign key)
- Retrieval works with flat faceting (domain + confidence)
- Hierarchize in v2.0 only if needed for more complex routing

---

**Document Status:** Ontology model complete and ready for routing logic design.
