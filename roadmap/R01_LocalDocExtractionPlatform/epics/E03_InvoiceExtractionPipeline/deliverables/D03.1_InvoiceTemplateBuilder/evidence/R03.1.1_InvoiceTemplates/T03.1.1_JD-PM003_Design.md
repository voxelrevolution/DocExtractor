# T03.1.1 â€“ Invoice Schema Design (Draft)

**Task:** T03.1.1_JD-PM003_DefineInvoiceSchema  
**Date:** 2026-01-15  
**Status:** Draft (implementation-aligned)

---

## Canonical Invoice Schema (MVP)

### Header Fields
- **vendor**: string (name of vendor)
- **invoice_number**: string (identifier)
- **invoice_date**: string (date, normalized to ISO if possible)
- **subtotal**: string (currency)
- **tax**: string (currency)
- **total**: string (currency)

### Line Items
Array of objects:
- **description**: string
- **quantity**: string
- **unit_price**: string
- **amount**: string

### Evidence Requirements
Every extracted field includes:
- **evidence.source** (text/pdf/ocr)
- **evidence.page** (1-based)
- **evidence.line** (1-based)
- **evidence.text** snippet
- **evidence.confidence**

### Quality & Review Fields
- **validation_errors**: list
- **validation_warnings**: list
- **review_required**: boolean
- **review_reasons**: list

### Provenance Metadata
- **extraction_id**
- **extraction_metadata** (engine, model, prompt_version, tokens_used)
- **raw_text_excerpt**

---

## Acceptance Criteria Alignment
- Required/optional fields defined (header + line items)
- Evidence pointers specified for all fields
- Review routing fields defined

---

## Notes
This draft reflects the current implementation in src/schemas/invoice.py and src/extraction/invoice_pipeline.py.
